<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Tractography</title>
  </head>
  <body>
    <noscript>
      <strong>niivue doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <header>
      
      <div id='whichBucket'>
        <label>Choose Dataset: </label>
        <select v-model="dataset" @change="update">
          <option v-for="dataset in datasets" :value="dataset">{{dataset.name}}</option>
        </select>
        <div v-if="showBoxes">
          <label>Type the abbreviation of the dataset you want to use, what comes before '/BIDS_curated':</label>
          <input v-model="otherName"/>
          <br>
          <label>Type the url prefix to the bucket (everything before /derivatives):</label>
          <input v-model="otherPrefix"/>
          <br>
          <button @click="entered">Done</button>
        </div>
      </div>
      
      <div id='subjectAndSession'>
        <div v-if="show">
          <label>Subject: </label>   
          <select v-model="subjectId" @change="update">
            <option v-for="subject in subjects" :value="subject">{{subject.id}}</option>
          </select>
          <label> Session: </label>
          {{subjectId.session}}
        </div>
      </div>

      <div id='scanType'>
        <div v-if="show">
          <label>Scan Type: </label>   
          <select v-model="scan" @change="update">
            <option v-for="scan in scans" :value="scan">{{scan.name}}</option>
          </select>
        </div>
      </div>
      
      <div id="zoom" >
        <label>Zoom: </label>
        <input type="range" min="0.01" max="1" step="0.01" class="slider" v-model="zoom" @change="update"/>
      </div>
      
      <div id ='checkedboxes'>
        <div v-if="show">
          <button v-if="!showBoxes" @click="displayBoxes" >Show Bundle Options</button>
          <div v-if="showBoxes">
            
            <button @click="dontShowBoxes">Don't Show Bundle Options</button>
            
            <table>
              <br>
              <tr>
                <label><input type="checkbox" v-model = "toggled" @change="toggle">Toggle All</label>
              </tr>
              <tr>
                <td v-for="bundleType in bundleTypes">
                  <label>{{bundleType.name}}</label>
                  <input type="checkbox" v-model="bundles" @change="update" :value="bundleType.id">
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div id = 'niivueVue'>
        <main id="container">
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
          <canvas id="gl1" width="1258" style="width: 100%; height: 100%;" height="800" tabindex="0">
          </canvas>
        </main>
        <button v-if="!controlsDisplayed" @click="showControls">Show Controls</button>
        <div v-if="controlsDisplayed">
          <button @click="hideControls">Hide Controls</button>
          <br>
          <label>Controls: </label>
          <ul>
            <li>Scroll to move the clip plane along the default axis. </li>
            <li>Left Click and move the mouse to rotate the camera.</li>
            <li>Right Click and move the mouse to rotate the clip plane.</li>
            <li>Click C to cycle through the default clip plane options.</li>
            <li>Click V to cycle through the default slice type options.</li>
            <li>Pressing H or L rotates the scene in opposite directions about the vertical axis.</li>
            <li>Pressing J or K rotates the scene in opposite directions about one of the horizontal axes.</li>
          </ul>
        </div>
      </div>
      </header>
  </body>
</html>
<script src="https://niivue.github.io/niivue/features/niivue.umd.js"></script>
<script src = "https://unpkg.com/vue@3"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script defer>
  const niivueVueApp = Vue.createApp({
    data(){
      return{
        nv1: new niivue.Niivue(({show3Dcrosshair: true, backColor: [1, 1, 1, 1]})),
        volumeList1:[],
        controlsDisplayed:false,
        vueHeight:"700",
      }
    },
    methods:{
      showControls(){
        gl1.height="1000"
        this.controlsDisplayed=true
      },
      hideControls(){
        this.controlsDisplayed=false
      },
      async initializeVolumeList(subjectData, colors){
        this.nv1 = new niivue.Niivue(({show3Dcrosshair: true, backColor: [1, 1, 1, 1]}))
        this.volumeList1 = [
          // first item is background image
          {
            url: subjectData[0][0],
            colorMap: "gray",
          }
        ]
        this.nv1.setSliceType(this.nv1.sliceTypeRender)//all three directions of slices are displayed if removed.
        this.nv1.attachTo('gl1')//attaches the entire image to the canvas.
      bundleUrls = []
      for (var q = 0; q<subjectData[1].length; q++){
            this.nv1.loadMeshes([{url: subjectData[0][1][subjectData[1][q]], rgba255: colors[q]}])
        }
      await this.nv1.loadMeshes(bundleUrls)//displays the fiber
      for (var q = 0; q<subjectData[1].length; q++){
            this.nv1.setMeshProperty(this.nv1.meshes[q].id, "fiberColor", "Fixed")
        }
        this.nv1.setClipPlane([-0.1, 270, 0])//displays the clip plane. displaced in the x? direction by 0.1. rotated 270 degrees about the z axis. The third number clearly has to do with angle and initial position in the z direction but my experimentation is not leading me to a clear result.
        this.nv1.loadVolumes(this.volumeList1)//Displayes the brain.
      },
    async changeVolume(volumeUrl){
      this.volumeList1 = [{url: volumeUrl, colorMap: "gray",}] 
      this.nv1.loadVolumes(this.volumeList1);
      this.nv1.updateGLVolume()
      },
    async changeMeshes(subjectData, colors){
      bundleUrls = []
      for (var q = 0; q<subjectData[1].length; q++){
          bundleUrls.push({url: subjectData[0][1][subjectData[1][q]], rgba255: colors[q]})
        }
      await this.nv1.loadMeshes(bundleUrls)//displays the fiber
      for (var q = 0; q<subjectData[1].length; q++){
          await this.nv1.setMeshProperty(this.nv1.meshes[q].id, "fiberColor", "Fixed")
        }
      this.nv1.drawScene()
      },
    changeZoom(zoom){
      this.nv1.scene.volScaleMultiplier = zoom*10;
      this.nv1.drawScene()
      } 
    }
  }).mount('#niivueVue')
  
  const dropVueApp2 = Vue.createApp({
    data(){
      return{
        datasets:[
          {name: 'HBN', prefix: 'https://fcp-indi.s3.amazonaws.com/data/Projects/HBN/BIDS_curated'},
          {name:'Other'}
        ],
        dataset:{name: 'HBN', prefix: 'https://fcp-indi.s3.amazonaws.com/data/Projects/HBN/BIDS_curated'},
        showBoxes: false,
        otherName: '',
        otherPrefix: '',
        //done: false
      }
    },
    methods:{
      update(){
        if (this.dataset.name == 'Other'){
          this.showBoxes = true
          dropVueApp.show = false
          checkboxVueApp.show = false
          dropVueApp3.show = false
        }
        else{
          this.showBoxes = false
          this.initializeDataset()
          dropVueApp.show = true
          checkboxVueApp.show = true
          dropVueApp3.show = true
        }
      },
      entered(){
        this.datasets.pop()
        this.datasets.push({name:this.otherName, prefix: this.otherPrefix})
        this.dataset = {name:this.otherName, prefix: this.otherPrefix}
        this.datasets.push({name:'Other'})
        this.showBoxes = false
        this.otherName = ''
        this.otherPrefix = ''
        //this.done = false
        this.update()
      },
      initializeSite(){
        array = d3.tsv(this.dataset.prefix+'/derivatives/afq/participants.tsv')
        const makeRealArray = async () => {
            const a = await array
            newArray = []
            for (i = 0; i< a.length; i++){
                newArray.push([a[i].participant_id, a[i].site])
            };
            classArray = []
            for (i=0; i<newArray.length; i++){
                classArray.push({id: newArray[i][0], session: newArray[i][1]})
            }
            dropVueApp.subjects = classArray
            dropVueApp.subjectId = classArray[0]
            console.log('helloooooooooooo')
            dropVueApp3.scans = await this.findAllScans()
            dropVueApp3.scan = dropVueApp3.scans[0]
            niivueVueApp.initializeVolumeList([this.arrayBasedOnSubjectAndSite(newArray[0], this.dataset.prefix, dropVueApp3.scan.url), checkboxVueApp.bundles], checkboxVueApp.colorsSelected)
            v = checkboxVueApp.findRealBundles()
            checkboxVueApp.bundlesPresentlyAvailable = await v
            checkboxVueApp.bundleTypes = checkboxVueApp.returnBundleTypes()
        };
        makeRealArray()
      },
      initializeDataset(){
        array = d3.tsv(this.dataset.prefix+'/derivatives/afq/participants.tsv')
        const makeRealArray = async () => {
            const a = await array
            newArray = []
            for (i = 0; i< a.length; i++){
                newArray.push([a[i].participant_id, a[i].site])
            };
            classArray = []
            for (i=0; i<newArray.length; i++){
                classArray.push({id: newArray[i][0], session: newArray[i][1]})
            }
            dropVueApp.subjects = classArray
            dropVueApp.subjectId = classArray[0]
            dropVueApp3.scans = await this.findAllScans()
            dropVueApp3.scan = dropVueApp3.scans[0]
            v = checkboxVueApp.findRealBundles()
            checkboxVueApp.bundlesPresentlyAvailable = await v
            checkboxVueApp.bundleTypes = checkboxVueApp.returnBundleTypes()
            array = this.arrayBasedOnSubjectAndSite(newArray[0], this.dataset.prefix, dropVueApp3.scan.url)
            niivueVueApp.changeVolume(array[0])
            if (checkboxVueApp.bundles.length > 0){
              niivueVueApp.changeMeshes([array, checkboxVueApp.bundles], checkboxVueApp.colorsSelected)
            }
        };
        makeRealArray()
      },
      arrayBasedOnSubjectAndSite(array, prefix, postFix){
        id = array[0]
        site = array[1]
        newArray = [prefix+"/derivatives/afq/"+id+"/ses-"+this.dataset.name+"site"+site+"/"+id+"_ses-"+this.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_"+postFix+'.nii.gz',checkboxVueApp.returnBundleLinkList()]
        return newArray
      },
      async findAllScans(){
        array = []
        scanType = ["model-DKI_FA", 'b0', 'model-CSD_APM', 'model-DKI_AWF',  'model-DKI_MD', 'model-DKI_MK', 'model-DTI_FA']
        for (i = 0; i<scanType.length; i++){
            response = await fetch(this.dataset.prefix+"/derivatives/afq/"+dropVueApp.subjectId.id+"/ses-"+this.dataset.name+"site"+dropVueApp.subjectId.session+"/"+dropVueApp.subjectId.id+"_ses-"+this.dataset.name+"site"+dropVueApp.subjectId.session+"_acq-64dir_space-T1w_desc-preproc_dwi_"+scanType[i]+'.nii.gz')
            if (response.ok){
                array.push({url: scanType[i], name: scanType[i]})
            }
        }
        return array
      }
    }
  }).mount('#whichBucket')

  

  const dropVueApp = Vue.createApp({
    data(){
      return{
        subjects:[],
        subjectId:[],
        show:true,
      }
    },
    methods:{
      async update(){
        array = dropVueApp2.arrayBasedOnSubjectAndSite([this.subjectId.id, this.subjectId.session], dropVueApp2.dataset.prefix, dropVueApp3.scan.url)
        niivueVueApp.changeVolume(array[0])
        if (checkboxVueApp.bundles.length > 0){
          niivueVueApp.changeMeshes([array, checkboxVueApp.bundles], checkboxVueApp.colorsSelected)
        }
        v = checkboxVueApp.findRealBundles()
        checkboxVueApp.bundlesPresentlyAvailable = await v
        checkboxVueApp.bundleTypes = checkboxVueApp.returnBundleTypes()
      }
    }
  }).mount(subjectAndSession)
  
  const dropVueApp3 = Vue.createApp({
    data(){
      return{
        scans:[],
        scan:{},
        show:true,
      }
    },
    methods:{
      update(){
        array = dropVueApp2.arrayBasedOnSubjectAndSite([dropVueApp.subjectId.id, dropVueApp.subjectId.session], dropVueApp2.dataset.prefix, this.scan.url) 
        niivueVueApp.changeVolume(array[0])
        if (checkboxVueApp.bundles.length > 0){
          niivueVueApp.changeMeshes([array, checkboxVueApp.bundles], checkboxVueApp.colorsSelected)
        }
      }
    }
  }).mount(scanType)
  
  const sliderVueApp = Vue.createApp({
    data(){
      return{
        zoom:0.1
      }
    },
    methods:{
      update(){
        niivueVueApp.changeZoom(this.zoom)
      }
    }
  }).mount(zoom)


  const checkboxVueApp = Vue.createApp({
    data(){
      return{
        bundlesPresentlyAvailable:[],
        bundleTypes:[],
        bundles:[],
        toggled:false,
        colors:this.returnColorArray(),
        colorsSelected:[],
        show:true,
        showBoxes:false,
      }
    },
    methods:{
      async findRealBundles(){
        array = []
        newArray = this.returnBundleLinkList()
        for (i = 0; i<newArray.length; i++){
            response = await fetch(newArray[i])
            if (response.ok){
                array.push(i)
            }
        }
        return array
      },
      returnBundleLinkList(){
        id = dropVueApp.subjectId.id
        prefix = dropVueApp2.dataset.prefix
        site = dropVueApp.subjectId.session
        newArray = [prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-AntFrontal_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ARC_L_tractography.trk",prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ARC_R_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ATR_L_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ATR_R_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CGC_L_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CGC_R_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CST_L_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CST_R_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-IFO_L_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-IFO_R_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ILF_L_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ILF_R_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Motor_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Occipital_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Orbital_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-PostParietal_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SLF_L_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SLF_R_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SupFrontal_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SupParietal_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Temporal_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-UNC_L_tractography.trk", prefix+"/derivatives/afq/"+id+"/ses-"+dropVueApp2.dataset.name+"site"+site+"/clean_bundles/"+id+"_ses-"+dropVueApp2.dataset.name+"site"+site+"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-UNC_R_tractography.trk"]
        return newArray
      },
      displayBoxes(){
        this.showBoxes=true
      },
      dontShowBoxes(){
        this.showBoxes=false
      },
      update(){
        this.colorsSelected = []
        for (j = 0; j < (this.bundles.length); j++){
          this.colorsSelected.push(this.colors[this.bundleTypes[this.bundles[j]].colorNumber])
        }
        niivueVueApp.changeMeshes([dropVueApp2.arrayBasedOnSubjectAndSite([dropVueApp.subjectId.id, dropVueApp.subjectId.session], dropVueApp2.dataset.prefix, dropVueApp3.scan.url), this.bundles], this.colorsSelected)
        if (this.bundles.length < 24){
          this.toggled = false
        }
      },
      toggle(){
        this.bundles = []
        if (this.toggled){
          for (bundleType in this.bundleTypes){
            this.bundles.push(bundleType)
          }
        }
        this.update()
      },
      returnColorArray(){
        tableau_20 = [
            [0.12156862745098039, 0.4666666666666667, 0.7058823529411765],
            [0.6823529411764706, 0.7803921568627451, 0.9098039215686274],
            [1.0, 0.4980392156862745, 0.054901960784313725],
            [1.0, 0.7333333333333333, 0.47058823529411764],
            [0.17254901960784313, 0.6274509803921569, 0.17254901960784313],
            [0.596078431372549, 0.8745098039215686, 0.5411764705882353],
            [0.8392156862745098, 0.15294117647058825, 0.1568627450980392],
            [1.0, 0.596078431372549, 0.5882352941176471],
            [0.5803921568627451, 0.403921568627451, 0.7411764705882353],
            [0.7725490196078432, 0.6901960784313725, 0.8352941176470589],
            [0.5490196078431373, 0.33725490196078434, 0.29411764705882354],
            [0.7686274509803922, 0.611764705882353, 0.5803921568627451],
            [0.8901960784313725, 0.4666666666666667, 0.7607843137254902],
            [0.9686274509803922, 0.7137254901960784, 0.8235294117647058],
            [0.4980392156862745, 0.4980392156862745, 0.4980392156862745],
            [0.7803921568627451, 0.7803921568627451, 0.7803921568627451],
            [0.7372549019607844, 0.7411764705882353, 0.13333333333333333],
            [0.8588235294117647, 0.8588235294117647, 0.5529411764705883],
            [0.09019607843137255, 0.7450980392156863, 0.8117647058823529],
            [0.6196078431372549, 0.8549019607843137, 0.8980392156862745]]
        rgbarray = []
        for (i = 0; i<tableau_20.length; i++){
            array = []
            for (j = 0; j<3; j++){
                array.push(tableau_20[i][j]*255)
            }
            array.push(255)
            rgbarray.push(array)
        }
        return rgbarray
      },
      returnBundleTypes(){
        bundleTypes = [
                {name: 'Anterior Frontal', id: 0, colorNumber: 0},
                {name: 'Arcuate Fasciculus-Left', id: 1, colorNumber: 18},
                {name: 'Arcuate Fasciculus-Right', id: 2, colorNumber: 19},
                {name: 'Anterior Thalamic Radiation-Left', id: 3, colorNumber: 0},
                {name: 'Anterior Thalamic Radiation-Right', id: 4, colorNumber: 1},
                {name: 'Cingulate Cingulum-Left', id: 5, colorNumber: 4},
                {name: 'Cingulate Cingulum-Right', id: 6, colorNumber: 5},
                {name: 'Corticospinal Tract-Left', id: 7, colorNumber: 2},
                {name: 'Corticospinal Tract-Right', id: 8, colorNumber: 3},
                {name: 'Inferior Fronto-Occipital Fasciculus-Left', id: 9, colorNumber: 10},
                {name: 'Inferior Fronto-Occipital Fasciculus-Right', id: 10, colorNumber: 11},
                {name: 'Inferior Longitudinal Fasciculus-Left', id: 11, colorNumber: 12},
                {name: 'Inferior Longitudinal Fasciculus-Right', id: 12, colorNumber: 13},
                {name: 'Motor', id: 13, colorNumber: 2},
                {name: 'Occipital', id: 14, colorNumber: 4},
                {name: 'Orbital', id: 15, colorNumber: 6},
                {name: 'Posterior Parietal', id: 16, colorNumber: 8},
                {name: 'Superior Longitudinal Fasciculus-Left', id: 17, colorNumber: 14},
                {name: 'Superior Longitudinal Fasciculus-Right', id: 18, colorNumber: 15},
                {name: 'Superior Frontal', id: 19, colorNumber: 10},
                {name: 'Superior Parietal', id: 20, colorNumber: 12},
                {name: 'Temporal', id: 21, colorNumber: 14},
                {name: 'Uncinate Fasciculus-Left', id: 22, colorNumber: 16},
                {name: 'Uncinate Fasciculus-Right', id: 23, colorNumber: 17}
            ]
        finalBundleTypes = []
        for (i=0; i<this.bundlesPresentlyAvailable.length; i++){
          finalBundleTypes.push(bundleTypes[this.bundlesPresentlyAvailable[i]])
        }
        console.log(checkboxVueApp.bundlesPresentlyAvailable)
        return finalBundleTypes
      }
    }
  }).mount('#checkedboxes')
  
  dropVueApp2.initializeSite()  

</script>